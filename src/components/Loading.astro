---

---

<div class='page-loader' transition:persist>
  <div class='page-loader-inner'>
    <div class='mask left'></div>
    <div class='mask right'></div>
  </div>
</div>

<style>
  .page-loader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
    pointer-events: none;
  }

  .page-loader-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .mask {
    position: absolute;
    top: 0;
    height: 100%;
    width: 50%;
    background-color: #000;
    transition: transform 0.7s cubic-bezier(0.7, 0, 0.3, 1);
  }

  .mask.left {
    left: 0;
    transform-origin: left center;
  }

  .mask.right {
    right: 0;
    transform-origin: right center;
  }

  :global(.loaded) .mask.left {
    transform: translateX(-100%);
  }

  :global(.loaded) .mask.right {
    transform: translateX(100%);
  }
</style>

<script>
  // 处理视图切换的生命周期
  document.addEventListener('astro:page-load', () => {
    document.body.classList.add('loaded')
  })

  document.addEventListener('astro:before-preparation', () => {
    document.body.classList.remove('loaded')
  })
</script>
